<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Log</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin: 0 0 20px 0;
            font-size: 24px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #555;
            font-size: 14px;
        }

        input[type="text"],
        input[type="number"],
        input[type="date"],
        input[type="time"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .radio-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
            margin: 0;
        }

        .radio-group input[type="radio"] {
            margin-right: 5px;
        }

        .exercise-block {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #4CAF50;
        }

        .exercise-title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .set-row {
            display: grid;
            grid-template-columns: 60px 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
            align-items: center;
        }

        .set-row span {
            font-weight: 600;
            font-size: 14px;
        }

        .set-row input {
            padding: 8px;
            font-size: 14px;
        }

        .button-group {
            position: sticky;
            bottom: 0;
            background: white;
            padding: 15px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            border-top: 2px solid #ddd;
            margin-top: 20px;
        }

        button {
            flex: 1;
            min-width: 120px;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-save {
            background: #4CAF50;
            color: white;
        }

        .btn-load {
            background: #2196F3;
            color: white;
        }

        .btn-pdf {
            background: #FF9800;
            color: white;
        }

        .btn-clear {
            background: #f44336;
            color: white;
        }

        .success-message {
            background: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
            text-align: center;
        }

        @media print {
            body {
                background: white;
                padding: 20px;
            }
            .button-group {
                display: none !important;
            }
            .success-message {
                display: none !important;
            }
            .container {
                box-shadow: none;
            }
        }

        @media (max-width: 600px) {
            .set-row {
                grid-template-columns: 1fr;
            }
            .set-row span {
                font-weight: bold;
            }
            button {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>

<div class="success-message" id="successMessage"></div>

<div class="container">
    <h1>WORKOUT LOG</h1>

    <form id="workoutForm">
        <div class="form-group">
            <label>Day Number (out of 84):</label>
            <input type="number" id="dayNumber" min="1" max="84">
        </div>

        <div class="form-group">
            <label>Date:</label>
            <input type="date" id="date">
        </div>

        <div class="form-group">
            <label>Workout Type:</label>
            <div class="radio-group">
                <label><input type="radio" name="workoutType" value="PUSH"> Push</label>
                <label><input type="radio" name="workoutType" value="PULL"> Pull</label>
                <label><input type="radio" name="workoutType" value="LEGS"> Legs</label>
            </div>
        </div>

        <div class="form-group">
            <label>Bodyweight (kg):</label>
            <input type="number" id="bodyweight" step="0.1">
        </div>

        <div class="form-group">
            <label>Sleep Last Night (hours):</label>
            <input type="number" id="sleepHours" step="0.5" min="0" max="24">
        </div>

        <div class="form-group">
            <label>Sleep Quality (1-10):</label>
            <input type="number" id="sleepQuality" min="1" max="10">
        </div>

        <div class="form-group">
            <label>Woke Up At:</label>
            <input type="time" id="wokeUp">
        </div>

        <div class="form-group">
            <label>In Bed By:</label>
            <input type="time" id="bedTime">
        </div>

        <div class="form-group">
            <label>Pre-Workout Meal:</label>
            <div class="radio-group">
                <label><input type="radio" name="preMeal" value="YES"> Yes</label>
                <label><input type="radio" name="preMeal" value="NO"> No</label>
            </div>
        </div>

        <hr style="margin: 25px 0; border: 1px solid #ddd;">

        <!-- Exercises will be inserted here -->
        <div id="exercisesContainer"></div>

        <hr style="margin: 25px 0; border: 1px solid #ddd;">

        <h3>Workout Summary</h3>

        <div class="form-group">
            <label>Total Time (minutes):</label>
            <input type="number" id="totalTime">
        </div>

        <div class="form-group">
            <label>Energy Level (1-10):</label>
            <input type="number" id="energyLevel" min="1" max="10">
        </div>

        <div class="form-group">
            <label>Best Set of the Day:</label>
            <input type="text" id="bestSet">
        </div>

        <div class="form-group">
            <label>What to Improve Next Time:</label>
            <textarea id="improve" rows="2"></textarea>
        </div>

        <div class="form-group">
            <label>Next Workout Goals:</label>
            <textarea id="goals" rows="3"></textarea>
        </div>

        <div class="button-group">
            <button type="button" class="btn-save" onclick="saveWorkout()">üíæ Save</button>
            <button type="button" class="btn-load" onclick="loadWorkout()">üìÇ Load</button>
            <button type="button" class="btn-pdf" onclick="savePDF()">üìÑ PDF</button>
            <button type="button" class="btn-clear" onclick="clearForm()">üóëÔ∏è Clear</button>
        </div>
    </form>
</div>

<script>
// Create exercises when page loads
document.addEventListener('DOMContentLoaded', function() {
    createExercises();
    document.getElementById('date').valueAsDate = new Date();
});

function createExercises() {
    const container = document.getElementById('exercisesContainer');

    for (let i = 1; i <= 7; i++) {
        const sets = i <= 4 ? 4 : 3;
        const exerciseDiv = document.createElement('div');
        exerciseDiv.className = 'exercise-block';

        let html = `
            <div class="exercise-title">EXERCISE ${i}</div>
            <div class="form-group">
                <label>Exercise Name:</label>
                <input type="text" id="exercise${i}Name" placeholder="e.g., Bench Press">
            </div>
        `;

        for (let j = 1; j <= sets; j++) {
            html += `
                <div class="set-row">
                    <span>Set ${j}:</span>
                    <input type="number" id="ex${i}set${j}weight" placeholder="kg" step="0.5">
                    <input type="number" id="ex${i}set${j}reps" placeholder="reps">
                    <input type="number" id="ex${i}set${j}rpe" placeholder="RPE" min="1" max="10">
                </div>
            `;
        }

        html += `
            <div class="form-group">
                <label>Notes:</label>
                <input type="text" id="exercise${i}Notes" placeholder="Optional notes">
            </div>
        `;

        exerciseDiv.innerHTML = html;
        container.appendChild(exerciseDiv);
    }
}

function saveWorkout() {
    const data = collectFormData();
    localStorage.setItem('lastWorkout', JSON.stringify(data));

    const workouts = JSON.parse(localStorage.getItem('allWorkouts') || '[]');
    data.timestamp = new Date().toISOString();
    workouts.push(data);
    localStorage.setItem('allWorkouts', JSON.stringify(workouts));

    showMessage('Workout saved! üí™');
}

function loadWorkout() {
    const saved = localStorage.getItem('lastWorkout');
    if (!saved) {
        alert('No saved workout found!');
        return;
    }

    const data = JSON.parse(saved);
    populateForm(data);
    showMessage('Workout loaded! üìÇ');
}

function collectFormData() {
    const data = {
        dayNumber: document.getElementById('dayNumber').value,
        date: document.getElementById('date').value,
        workoutType: document.querySelector('input[name="workoutType"]:checked')?.value,
        bodyweight: document.getElementById('bodyweight').value,
        sleepHours: document.getElementById('sleepHours').value,
        sleepQuality: document.getElementById('sleepQuality').value,
        wokeUp: document.getElementById('wokeUp').value,
        bedTime: document.getElementById('bedTime').value,
        preMeal: document.querySelector('input[name="preMeal"]:checked')?.value,
        exercises: [],
        totalTime: document.getElementById('totalTime').value,
        energyLevel: document.getElementById('energyLevel').value,
        bestSet: document.getElementById('bestSet').value,
        improve: document.getElementById('improve').value,
        goals: document.getElementById('goals').value
    };

    for (let i = 1; i <= 7; i++) {
        const sets = i <= 4 ? 4 : 3;
        const exercise = {
            name: document.getElementById(`exercise${i}Name`).value,
            sets: [],
            notes: document.getElementById(`exercise${i}Notes`).value
        };

        for (let j = 1; j <= sets; j++) {
            exercise.sets.push({
                weight: document.getElementById(`ex${i}set${j}weight`).value,
                reps: document.getElementById(`ex${i}set${j}reps`).value,
                rpe: document.getElementById(`ex${i}set${j}rpe`).value
            });
        }

        data.exercises.push(exercise);
    }

    return data;
}

function populateForm(data) {
    document.getElementById('dayNumber').value = data.dayNumber || '';
    document.getElementById('date').value = data.date || '';
    if (data.workoutType) {
        const radio = document.querySelector(`input[name="workoutType"][value="${data.workoutType}"]`);
        if (radio) radio.checked = true;
    }
    document.getElementById('bodyweight').value = data.bodyweight || '';
    document.getElementById('sleepHours').value = data.sleepHours || '';
    document.getElementById('sleepQuality').value = data.sleepQuality || '';
    document.getElementById('wokeUp').value = data.wokeUp || '';
    document.getElementById('bedTime').value = data.bedTime || '';
    if (data.preMeal) {
        const radio = document.querySelector(`input[name="preMeal"][value="${data.preMeal}"]`);
        if (radio) radio.checked = true;
    }

    data.exercises.forEach((exercise, i) => {
        const exNum = i + 1;
        document.getElementById(`exercise${exNum}Name`).value = exercise.name || '';
        document.getElementById(`exercise${exNum}Notes`).value = exercise.notes || '';
        exercise.sets.forEach((set, j) => {
            const setNum = j + 1;
            document.getElementById(`ex${exNum}set${setNum}weight`).value = set.weight || '';
            document.getElementById(`ex${exNum}set${setNum}reps`).value = set.reps || '';
            document.getElementById(`ex${exNum}set${setNum}rpe`).value = set.rpe || '';
        });
    });

    document.getElementById('totalTime').value = data.totalTime || '';
    document.getElementById('energyLevel').value = data.energyLevel || '';
    document.getElementById('bestSet').value = data.bestSet || '';
    document.getElementById('improve').value = data.improve || '';
    document.getElementById('goals').value = data.goals || '';
}

function savePDF() {
    // Use browser's native print to PDF
    window.print();
}

function clearForm() {
    if (confirm('Clear all fields?')) {
        document.getElementById('workoutForm').reset();
        document.getElementById('date').valueAsDate = new Date();
    }
}

function showMessage(msg) {
    const el = document.getElementById('successMessage');
    el.textContent = msg;
    el.style.display = 'block';
    setTimeout(() => {
        el.style.display = 'none';
    }, 3000);
}
</script>

</body>
</html>
